# Miose - Draw & Guess 项目文档
> 线上运行地址: http://dg.kromiose.top/ (仅支持pc端或pad端)

## 特殊环境要求

- *Flask == 1.1.2
- *Werkzeug == 1.0.0

## 部署流程

1. clone本项目到本地
2. 进入`/backend`并在该目录下执行`pip install -r requirements.txt`(确保您已经安装好了python3)
3. 复制一份`/backend/config-template.py`并重命名为`config.py`
4. 按照您的环境情况和需求自行编辑配置`config.py`中的内容
5. 启动业务服务: 在`/backend/BusinessServer/`下执行`Python app.py`并使用screen挂起在后台保持运行
6. 启动游戏服务: 在`/backend/GameServer/`下执行`Python app.py`并使用screen挂起在后台保持运行
7. 在`/frontend/`目录下，运行以下命令打包前端文件
    ```bash
    npm i
    npm run build
    ```
8. 自行部署`/frontend/dist`(前端站点文件目录)到您的任意服务器上(不必与后端服务运行在同一服务器上)
9. 前端服务器配置反向代理，将所有`/api`反向代理到业务服务后端并去除`/api`
10. 访问前端页面测试是否正常

## 主要架构设计
> 为了提高应用服务的高可用性和高并发支持，整个系统由三部分服务构成，即前端服务、业务服务、游戏服务

### 主业务服务器
> 主要负责提供用户、业务服务、数据库服务

#### 账号管理

- 账号注册接口 - 已完成
- 用户登录接口 - 已完成
- 邮件验证码获取接口 - 已完成
- 重置密码接口 - 待开始
- 管理后台接口 - 待开始

### 前端服务器
> 主要负责前端页面资源分发，通过Nginx进行部署，api接口反向代理到主业务服务器

- 基本架构设计 - 已完成

#### 登录页面

- 基本页面布局 - 已完成
- 用户注册模块 - 已完成
- 用户登录模块 - 已完成

#### 游戏大厅界面

- 基本页面布局 - 已完成
    + 个人信息
    + 房间列表 - 已完成
    + 主持房间 - 已完成
    + 聊天栏 - 已完成
    + 公告栏 - 已完成

#### 游戏房间界面

- 画板模块 - 已完成
- 聊天模块 - 已完成
- 玩家列表 - 已完成

### 游戏服务器（支持多台部署）
> 专门用于提供游戏服务，根据服务器性能，每台游戏服务器可以容纳一定数量玩家进行游戏

- 基本架构设计 - 已完成
- 游戏房间进程控制系统 - 已完成
- 房间资源回收系统 - 已完成